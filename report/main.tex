\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{geometry}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{float}
\usepackage{booktabs}

\geometry{a4paper, margin=1in}

\title{Smart Pacer}
\author{Lorenzo Gandini \\ Internet of Things \\ University La Sapienza \\ A.Y. 2024/2025}
\date{\today}

\begin{document}

% Copertina
\maketitle

\newpage

% Table of Contents
\tableofcontents
\newpage

\section{Abstract}\label{abstract}
Highly motivated runners, from elite to amateurs, soon discover that rigid training plans treat every day as equal—even though sleep, nutrition, hormonal cycles, stress, and travel routinely shift physiological readiness. On a “bad day” an athlete may struggle to complete a prescribed 10 × 1 min Z5 fartlek, while on a “good day” the same session leaves untapped potential.  
\textbf{Smart Pacer} tackles this mismatch by casting second-by-second pacing as a finite-horizon \emph{Markov Decision Process} and solving it with tabular \emph{Q-learning}. 

Each second the agent analyzes a compact environment defined by heart-rate zone, power zone, fatigue, phase of the workout, and slope of the ground, and selects one of three intuitive actions: \emph{accelerate}, \emph{hold}, or \emph{ease}. A multi-term reward function was defined inside the simulation environment to maximize the benefit from each training session.

The model was trained using Q-learning to optimize the reward across different tested parameters, ensuring adaptability to various athlete profiles and workout types. Policies are trained off-line across four canonical workouts (fartlek, progression, endurance, recovery) and three athlete archetypes, then deployed on-line via a 1 Hz MQTT stream that simulates what a smartwatch could prompt in a real-life scenario.

Additionally, a video simulation was developed to visualize athletes' performances on different GPX tracks with the defined training programs, dynamically showing fatigue levels throughout each session.


\section{Formalization of the Markov Decision Process}\label{sec:methodology}
\input{chapters/methodology.tex}

\newpage
\section{General settings}\label{sec:settings}
\input{chapters/settings.tex}

\newpage
\section{Q-Learning Training Experiments}\label{sec:qlearning}
\input{chapters/q_learning.tex}


\newpage
\section{MQTT Communication}\label{sec:mqtt-communication}
\input{chapters/mqtt_communication.tex}  

\newpage
\newpage\section{Challenges and Future Improvements}\label{sec:limitations}
\input{chapters/challenges_future_improvements.tex}

\end{document}
